<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">

<head th:replace="layouts :: header"></head>

<body>

<nav th:replace="layouts :: navbar(Register)"></nav>

<div class="container">
    <header class="card-header">
        <h4 class="card-title mt-2">Регистрация нового пользователя</h4>
    </header>
    <div id="loginbox" style="margin-top: 50px;"
         class="mainbox col-md-3 col-md-offset-2 col-sm-6 col-sm-offset-2">

        <div class="panel panel-primary">

            <div style="padding-top: 30px" class="panel-body">
                <form th:action="@{/register/processRegistrationForm}"
                      th:object="${systemUser}" method="post" class="form-horizontal">

                    <div class="form-group">
                        <div class="col-xs-15">
                            <div th:if="${registrationError != null}">
                                <div class="alert alert-danger col-xs-offset-1 col-xs-10">
                                    ${registrationError}
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- User name -->
                    <div class="error" th:if="${#fields.hasErrors('userName')}" th:errors="*{userName}"></div>
                    <div style="margin-bottom: 25px" class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                        <input th:field="*{userName}" type="text" pattern="[^а-яёА-ЯЁ]{3,}" maxlength="255" placeholder="Логин (*)" title="Логин может быть не менее 3 символов, состоять из латинских букв и цифр" class="form-control" required/>
                    </div>

                    <!-- Password -->
                    <div class="error" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
                    <div style="margin-bottom: 25px" class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                        <input type="password" pattern="(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#$%^&*]{5,}" th:field="*{password}" placeholder="Пароль (*****)" title="Пароль может быть не менее 5 символов, состоять из цифр и букв и не менее одной заглавной буквы" class="form-control" required/>
                    </div>

<!--                    Repeat password-->
                    <div class="error" th:if="${#fields.hasErrors('matchingPassword')}" th:errors="*{matchingPassword}"></div>
                    <div style="margin-bottom: 25px" class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input type="password" pattern="(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#$%^&*]{5,}" th:field="*{matchingPassword}" placeholder="Повторите пароль (*****)" title="Введите пароль повторно" class="form-control" required/>
                    </div>

<!--                    Name-->
                    <div class="error" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"></div>
                    <div style="margin-bottom: 25px" class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input th:field="*{firstName}" type="text" pattern="[а-яёА-ЯЁ]{3,}" maxlength="255" placeholder="Имя (*)" title="Введите имя на русском языке" class="form-control" required/>
                    </div>

<!--                    Patronymic-->
                    <div class="error" th:if="${#fields.hasErrors('patronymic')}" th:errors="*{firstName}"></div>
                    <div style="margin-bottom: 25px" class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input th:field="*{patronymic}" type="text" pattern="[а-яёА-ЯЁ]{3,}" maxlength="255" placeholder="Отчество (*)" title="Введите отчество на русском языке" class="form-control" required/>
                    </div>

                    <!-- Last name -->
                    <div class="error" th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"></div>
                    <div style="margin-bottom: 25px" class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input th:field="*{lastName}" type="text" pattern="[а-яёА-ЯЁ]{3,}"  maxlength="255" placeholder="Фамилия (*)" title="Введите фамилию на русском языке" class="form-control" required/>
                    </div>

                    <!-- Email -->
                    <div class="error" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
                    <div style="margin-bottom: 25px" class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input th:field="*{email}" type="email" placeholder="email (*)" title="" class="form-control" required/>
                    </div>

                    <!-- Work phone -->
                    <div style="margin-bottom: 25px" class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                        <input th:field="*{workPhone}" type="tel" pattern="\d{2}[-]{0,1}\d{2}" placeholder="Рабочий номер телефона 12-34" title="Рабочий номер телефона в формате 12-34" class="form-control"/>
                    </div>

                    <!-- Mobile phone -->
                    <div style="margin-bottom: 25px" class="input-group">
                        <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                        <input th:field="*{mobilePhone}" type="tel" pattern="\+7\s?[\(]{0,1}9[0-9]{2}[\)]{0,1}\s?\d{3}[-]{0,1}\d{2}[-]{0,1}\d{2}" placeholder="Сотовый +7 (900) 123-45-67" title="Сотовый в формате +7 (900) 123-45-67" class="form-control"/>
                    </div>

                    <div style="margin-top: 10px" class="form-group">
                        <div class="col-sm-6 controls">
                            <button type="submit" class="btn btn-primary">Регистрация</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div th:replace="layouts :: footer"></div>
</body>
</html>